<p>I presented in my last post "<a href="index.php/calendar-and-time-zone-in-c-20-calendar-dates">Calendar and Time Zone in C++20: Calendar Dates</a>" the new calendar-related data types. Today, I go one step further and interact with them.</p>
<hr id="system-readmore" />
<p>&nbsp;<img style="display: block; margin-left: auto; margin-right: auto;" src="images/blog/Cpp20/InteractWithCalendarDates/TimelineCpp20CoreLanguage.png" alt="TimelineCpp20CoreLanguage" width="650" height="278" /></p>
<p>Assume you have a calendar date such as <code>year(2100)/2/29. </code>Your first question may be: Is this date valid?</p>
<h2>Check if a Date is Valid</h2>
<p>The various calendar types in C++20 have a function <code>ok</code>. This function returns <code>true</code> if the date is valid.</p>
<p>&nbsp;</p>
<!-- HTML generated using hilite.me -->
<div style="background: #f0f3f3; overflow: auto; width: auto; gray;border-width: .1em .1em .1em .8em;">
<pre style="margin: 0; line-height: 125%;"><span style="color: #0099ff; font-style: italic;">//  leapYear.cpp</span>

<span style="color: #009999;">#include &lt;iostream&gt;</span>
<span style="color: #009999;">#include "date.h"</span>
 
<span style="color: #007788; font-weight: bold;">int</span> <span style="color: #cc00ff;">main</span>() {

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>boolalpha <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    
    <span style="color: #006699; font-weight: bold;">using</span> <span style="color: #006699; font-weight: bold;">namespace</span> date; 

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Valid days"</span> <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;         <span style="color: #0099ff; font-style: italic;">// (1)</span>       
    day day31(<span style="color: #ff6600;">31</span>);
    day day32 <span style="color: #555555;">=</span> day31 <span style="color: #555555;">+</span> days(<span style="color: #ff6600;">1</span>);
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  day31: "</span> <span style="color: #555555;">&lt;&lt;</span> day31 <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"; "</span>;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"                   day31.ok(): "</span>  <span style="color: #555555;">&lt;&lt;</span> day31.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  day32: "</span> <span style="color: #555555;">&lt;&lt;</span> day32 <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"; "</span>;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"day32.ok(): "</span>  <span style="color: #555555;">&lt;&lt;</span> day32.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
   

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Valid months"</span> <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;       <span style="color: #0099ff; font-style: italic;">// (2)</span> 
    month month1(<span style="color: #ff6600;">1</span>);
    month month0(<span style="color: #ff6600;">0</span>);
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  month1: "</span> <span style="color: #555555;">&lt;&lt;</span> month1 <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"; "</span>;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"                   month1.ok(): "</span>  <span style="color: #555555;">&lt;&lt;</span> month1.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  month0: "</span> <span style="color: #555555;">&lt;&lt;</span> month0 <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"; "</span>;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"month0.ok(): "</span>  <span style="color: #555555;">&lt;&lt;</span> month0.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Valid years"</span> <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;       <span style="color: #0099ff; font-style: italic;">// (3)</span> 
    year year2020(<span style="color: #ff6600;">2020</span>);
    year year32768(<span style="color: #555555;">-</span><span style="color: #ff6600;">32768</span>);
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  year2020: "</span> <span style="color: #555555;">&lt;&lt;</span> year2020 <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"; "</span>;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"                       year2020.ok(): "</span>  <span style="color: #555555;">&lt;&lt;</span> year2020.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  year32768: "</span> <span style="color: #555555;">&lt;&lt;</span> year32768 <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"; "</span>;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"year32768.ok(): "</span>  <span style="color: #555555;">&lt;&lt;</span> year32768.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Leap Years"</span>  <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;       <span style="color: #0099ff; font-style: italic;">// (4)</span> 

    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2016{year(<span style="color: #ff6600;">2016</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};
    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2020{year(<span style="color: #ff6600;">2020</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};
    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2024{year(<span style="color: #ff6600;">2024</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2016.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2016.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2020.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2020.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2024.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2024.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

     std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"No Leap Years"</span>  <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;   <span style="color: #0099ff; font-style: italic;">// (5)</span> 

    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2100{year(<span style="color: #ff6600;">2100</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};
    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2200{year(<span style="color: #ff6600;">2200</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};
    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2300{year(<span style="color: #ff6600;">2300</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2100.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2100.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2200.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2200.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2300.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2300.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Leap Years"</span>  <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;      <span style="color: #0099ff; font-style: italic;">// (6)</span> 

    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2000{year(<span style="color: #ff6600;">2000</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};
    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2400{year(<span style="color: #ff6600;">2400</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};
    constexpr <span style="color: #006699; font-weight: bold;">auto</span> leapYear2800{year(<span style="color: #ff6600;">2800</span>)<span style="color: #555555;">/</span><span style="color: #ff6600;">2</span><span style="color: #555555;">/</span><span style="color: #ff6600;">29</span>};

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2000.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2000.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2400.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2400.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  leapYear2800.ok(): "</span> <span style="color: #555555;">&lt;&lt;</span> leapYear2800.ok() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

}
</pre>
</div>
<p>&nbsp;</p>
<p>I checked in the program if a given day (line1), a given month (line 2), or a given year (line 3) is valid. The range of a day is [1, 31], of a month [1, 12], and of a year [ -32767, 32767]. Consequently, the<code> ok</code>-call on the corresponding values returns <code>false</code>. Two facts are interesting when I output the various values. First, if the value is not valid, the output displays: <code>"is not a valid day</code>"; <code>"is not a valid month</code>"; <code>"is not a valid year</code>". Second, month values are displayed in string representation.</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="images/blog/Cpp20/InteractWithCalendarDates/leapYears.png" alt="leapYears" width="650" height="643" /></p>
<p>You can apply the <code>ok</code>-call on a calendar date. Now it's quite easy to check if a specific calendar date is a leap day and, therefore, the corresponding year a leap year. In the worldwide used <a href="https://en.wikipedia.org/wiki/Gregorian_calendar">Gregorian calendar</a>, the following rules apply:</p>
<p>Each year that is exactly divisible by <strong>4</strong> is a <strong>leap yea</strong>r.</p>
<ul>
<li>Except for years which are exactly divisible by <strong>100</strong>. They are <strong>no leap years</strong>.
<ul>
<li>Except for years which are exactly divisible by <strong>400</strong>. They are <strong>leap years</strong>.</li>
</ul>
<div></div>
</li>
</ul>
<p>Too complicate? The program <span style="font-family: courier new, courier;">leapYears.cpp</span> exemplifies this rule.</p>
<p>The extended chrono library makes it quite comfortable to ask for the time duration between calendar dates.</p>
<h2>Query Calendar Dates</h2>
<p>Without further ado. The following program queries a few calendar dates.</p>
<!-- HTML generated using hilite.me -->
<div style="background: #f0f3f3; overflow: auto; width: auto; gray;border-width: .1em .1em .1em .8em;">
<pre style="margin: 0; line-height: 125%;"><span style="color: #0099ff; font-style: italic;">// queryCalendarDates.cpp</span>

<span style="color: #009999;">#include "date.h"</span>
<span style="color: #009999;">#include &lt;iostream&gt;</span>

<span style="color: #007788; font-weight: bold;">int</span> <span style="color: #cc00ff;">main</span>() {

    <span style="color: #006699; font-weight: bold;">using</span> <span style="color: #006699; font-weight: bold;">namespace</span> date;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    <span style="color: #006699; font-weight: bold;">auto</span> now <span style="color: #555555;">=</span> std<span style="color: #555555;">::</span>chrono<span style="color: #555555;">::</span>system_clock<span style="color: #555555;">::</span>now();              <span style="color: #0099ff; font-style: italic;">// (1)</span>
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"The current time is: "</span> <span style="color: #555555;">&lt;&lt;</span> now <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">" UTC</span><span style="color: #cc3300; font-weight: bold;">\n</span><span style="color: #cc3300;">"</span>;       <span style="color: #0099ff; font-style: italic;"></span>
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"The current date is: "</span> <span style="color: #555555;">&lt;&lt;</span> floor<span style="color: #555555;">&lt;</span>days<span style="color: #555555;">&gt;</span>(now) <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"The current date is: "</span> <span style="color: #555555;">&lt;&lt;</span> year_month_day{floor<span style="color: #555555;">&lt;</span>days<span style="color: #555555;">&gt;</span>(now)} <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"The current date is: "</span> <span style="color: #555555;">&lt;&lt;</span> year_month_weekday{floor<span style="color: #555555;">&lt;</span>days<span style="color: #555555;">&gt;</span>(now)} <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    
    <span style="color: #006699; font-weight: bold;">auto</span> currentDate <span style="color: #555555;">=</span> year_month_day(floor<span style="color: #555555;">&lt;</span>days<span style="color: #555555;">&gt;</span>(now));       <span style="color: #0099ff; font-style: italic;">// (2)</span>
    <span style="color: #006699; font-weight: bold;">auto</span> currentYear <span style="color: #555555;">=</span> currentDate.year();
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"The current year is "</span> <span style="color: #555555;">&lt;&lt;</span> currentYear <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">'\n'</span>;    
    <span style="color: #006699; font-weight: bold;">auto</span> currentMonth <span style="color: #555555;">=</span> currentDate.month();
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"The current month is "</span> <span style="color: #555555;">&lt;&lt;</span> currentMonth <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">'\n'</span>; 
    <span style="color: #006699; font-weight: bold;">auto</span> currentDay <span style="color: #555555;">=</span> currentDate.day();
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"The current day is "</span> <span style="color: #555555;">&lt;&lt;</span> currentDay <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">'\n'</span>; 

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
                                                               <span style="color: #0099ff; font-style: italic;">// (3)</span>
    <span style="color: #006699; font-weight: bold;">auto</span> hAfter <span style="color: #555555;">=</span> floor<span style="color: #555555;">&lt;</span>std<span style="color: #555555;">::</span>chrono<span style="color: #555555;">::</span>hours<span style="color: #555555;">&gt;</span>(now) <span style="color: #555555;">-</span> sys_days(January<span style="color: #555555;">/</span><span style="color: #ff6600;">1</span><span style="color: #555555;">/</span>currentYear); 
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"It has been "</span> <span style="color: #555555;">&lt;&lt;</span> hAfter <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">" since New Year!</span><span style="color: #cc3300; font-weight: bold;">\n</span><span style="color: #cc3300;">"</span>;  
    <span style="color: #006699; font-weight: bold;">auto</span> nextYear <span style="color: #555555;">=</span> currentDate.year() <span style="color: #555555;">+</span> years(<span style="color: #ff6600;">1</span>);             <span style="color: #0099ff; font-style: italic;">// (4)</span>
    <span style="color: #006699; font-weight: bold;">auto</span> nextNewYear <span style="color: #555555;">=</span> sys_days(January<span style="color: #555555;">/</span><span style="color: #ff6600;">1</span><span style="color: #555555;">/</span>nextYear);
    <span style="color: #006699; font-weight: bold;">auto</span> hBefore <span style="color: #555555;">=</span>  sys_days(January<span style="color: #555555;">/</span><span style="color: #ff6600;">1</span><span style="color: #555555;">/</span>nextYear) <span style="color: #555555;">-</span> floor<span style="color: #555555;">&lt;</span>std<span style="color: #555555;">::</span>chrono<span style="color: #555555;">::</span>hours<span style="color: #555555;">&gt;</span>(now); 
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"It is "</span> <span style="color: #555555;">&lt;&lt;</span> hBefore <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">" before New Year!</span><span style="color: #cc3300; font-weight: bold;">\n</span><span style="color: #cc3300;">"</span>;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
                                                               <span style="color: #0099ff; font-style: italic;">// (5)</span>
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"It has been "</span> <span style="color: #555555;">&lt;&lt;</span> floor<span style="color: #555555;">&lt;</span>days<span style="color: #555555;">&gt;</span>(hAfter) <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">" since New Year!</span><span style="color: #cc3300; font-weight: bold;">\n</span><span style="color: #cc3300;">"</span>;    
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"It is "</span> <span style="color: #555555;">&lt;&lt;</span> floor<span style="color: #555555;">&lt;</span>days<span style="color: #555555;">&gt;</span>(hBefore) <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">" before New Year!</span><span style="color: #cc3300; font-weight: bold;">\n</span><span style="color: #cc3300;">"</span>;
    
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    
}
</pre>
</div>
<p>&nbsp;</p>
<p>With the C++20 extension, you can directly display a time point, such as now (line 1). <code>std::chrono::floor</code> allows it to convert the time point to a day <code>std::chrono::sys_days</code>. This value can be used to initialize the calendar type<code> std::chrono::year_month_day</code>. Finally, when I put the value into a <code>std::chrono::year_month_weekday</code> calendar type, I get the answer, that this specific day is the 3rd Tuesday in October.</p>
<p>Of course, I can also ask a calendar date for its components, such as the current year, month, or day (line 2).</p>
<p>Line (3) is the most interesting one. When&nbsp; I subtract from the current date in hours resolution first January of the current year, I get the hour since the new year. On the contrary: When I subtract from the first January of the next year (line 4) the current date in hours resolution, I get the hours to the new year. Maybe you don't like the hour's resolution. Line 5 displays the values in days resolution.</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="images/blog/Cpp20/InteractWithCalendarDates/queryCalendarDates.png" alt="queryCalendarDates" width="500" height="451" /></p>
<p>I want to know the weekdays of my birthdays.</p>
<h2><code>Query Weekdays</code></h2>
<p>Thanks to the extended chrono library, it is quite easy to get the weekday of a given calendar date.</p>
<!-- HTML generated using hilite.me -->
<div style="background: #f0f3f3; overflow: auto; width: auto; gray;border-width: .1em .1em .1em .8em;">
<pre style="margin: 0; line-height: 125%;"><span style="color: #0099ff; font-style: italic;">// weekdaysOfBirthdays.cpp</span>

<span style="color: #009999;">#include &lt;cstdlib&gt;</span>
<span style="color: #009999;">#include &lt;iostream&gt;</span>
<span style="color: #009999;">#include "date.h"</span>

<span style="color: #007788; font-weight: bold;">int</span> <span style="color: #cc00ff;">main</span>() {

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    <span style="color: #006699; font-weight: bold;">using</span> <span style="color: #006699; font-weight: bold;">namespace</span> date;

    <span style="color: #007788; font-weight: bold;">int</span> y;
    <span style="color: #007788; font-weight: bold;">int</span> m;
    <span style="color: #007788; font-weight: bold;">int</span> d;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Year: "</span>;                          <span style="color: #0099ff; font-style: italic;">// (1)</span>
    std<span style="color: #555555;">::</span>cin <span style="color: #555555;">&gt;&gt;</span> y;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Month: "</span>;
    std<span style="color: #555555;">::</span>cin <span style="color: #555555;">&gt;&gt;</span> m;
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Day: "</span>;
    std<span style="color: #555555;">::</span>cin <span style="color: #555555;">&gt;&gt;</span> d;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    <span style="color: #006699; font-weight: bold;">auto</span> birthday <span style="color: #555555;">=</span> year(y)<span style="color: #555555;">/</span>month(m)<span style="color: #555555;">/</span>day(d);       <span style="color: #0099ff; font-style: italic;">// (2)</span>

    <span style="color: #006699; font-weight: bold;">if</span> (not birthday.ok()) {                       <span style="color: #0099ff; font-style: italic;">// (3)</span>
        std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> birthday <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
        std<span style="color: #555555;">::</span>exit(EXIT_FAILURE);
    }

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Birthday: "</span> <span style="color: #555555;">&lt;&lt;</span> birthday <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    <span style="color: #006699; font-weight: bold;">auto</span> birthdayWeekday <span style="color: #555555;">=</span> year_month_weekday(birthday);    <span style="color: #0099ff; font-style: italic;">// (4)</span>
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Weekday of birthday: "</span> <span style="color: #555555;">&lt;&lt;</span> birthdayWeekday.weekday() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    <span style="color: #006699; font-weight: bold;">auto</span> currentDate <span style="color: #555555;">=</span> year_month_day(floor<span style="color: #555555;">&lt;</span>days<span style="color: #555555;">&gt;</span>(std<span style="color: #555555;">::</span>chrono<span style="color: #555555;">::</span>system_clock<span style="color: #555555;">::</span>now()));  
    <span style="color: #006699; font-weight: bold;">auto</span> currentYear <span style="color: #555555;">=</span> currentDate.year();
    
    <span style="color: #006699; font-weight: bold;">auto</span> age <span style="color: #555555;">=</span> (<span style="color: #007788; font-weight: bold;">int</span>)currentDate.year() <span style="color: #555555;">-</span> (<span style="color: #007788; font-weight: bold;">int</span>)birthday.year();  <span style="color: #0099ff; font-style: italic;">// (5)</span>
    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Your age: "</span> <span style="color: #555555;">&lt;&lt;</span> age <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"Weekdays for your next 10 birthdays"</span> <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;  <span style="color: #0099ff; font-style: italic;">// (6)</span>

    <span style="color: #006699; font-weight: bold;">for</span> (<span style="color: #007788; font-weight: bold;">int</span> i <span style="color: #555555;">=</span> <span style="color: #ff6600;">1</span>, newYear <span style="color: #555555;">=</span> (<span style="color: #007788; font-weight: bold;">int</span>)currentYear; i <span style="color: #555555;">&lt;=</span> <span style="color: #ff6600;">10</span>;  <span style="color: #555555;">++</span>i ) {  
        std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"  Age "</span> <span style="color: #555555;">&lt;&lt;</span>  <span style="color: #555555;">++</span>age <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
        <span style="color: #006699; font-weight: bold;">auto</span> newBirthday <span style="color: #555555;">=</span> year(<span style="color: #555555;">++</span>newYear)<span style="color: #555555;">/</span>month(m)<span style="color: #555555;">/</span>day(d);
        std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"    Birthday: "</span> <span style="color: #555555;">&lt;&lt;</span> newBirthday <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
        std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> <span style="color: #cc3300;">"    Weekday of birthday: "</span> 
                  <span style="color: #555555;">&lt;&lt;</span> year_month_weekday(newBirthday).weekday() <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;
    }

    std<span style="color: #555555;">::</span>cout <span style="color: #555555;">&lt;&lt;</span> std<span style="color: #555555;">::</span>endl;

}
</pre>
</div>
<p>&nbsp;</p>
<p>First, the program asks you for the year, month, and day of your birthday (line 1). Based on the input, a calendar date is created (line 2) and checked if it's valid (line 3). Now I display the weekday of your birthday. I use, therefore, the calendar date to fill the calendar type <code>std::chrono::year_month_weekday</code> (line 4). To get the <code>int</code> representation of the calendar type year, I have to convert it to <code>int</code> (line 5). Now I can display your age. Finally, the for-loop displays to each of your next ten birthdays (line 6) the following information: your age, the calendar date, and the weekday. I only have to increment the <code>age</code> and <code>newYear</code> variable.</p>
<p>Here is a run of the program with my birthday.</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="images/blog/Cpp20/InteractWithCalendarDates/weekdaysOfBirthdays.png" alt="weekdaysOfBirthdays" width="500" height="881" /></p>
<h2>What's next?</h2>
<p>One important component in my posts to the extended chrono library is still missing: time zones.</p>
<p></p>
<p>{loadmoduleid 153}</p>
<p>&nbsp;</p>
<div id="simple-translate">&nbsp;</div>