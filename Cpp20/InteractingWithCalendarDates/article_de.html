<div class="vorspann">In meinem letzten Artikel "<a alt="%7B%22type%22%3A%22E%22%2C%22target%22%3A%22_blank%22%2C%22subject%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22ir_link%22%3A1%2C%22anchor%22%3A%22%22%2C%22alias%22%3A%22%22%2C%22destination%22%3A%22https%3A%2F%2Fheise.de%2F-4943174%22%2C%22version%22%3A1%2C%22custom%22%3A%7B%7D%2C%22href%22%3A%22https%3A%2F%2Fheise.de%2F-4943174%22%2C%22text%22%3A%22Kalender%20und%20Zeitzonen%20in%20C%2B%2B20%3A%20Kalendertag%22%7D" title="Link auf https://heise.de/-4943174" href="https://heise.de/-4943174" class="">Kalender und Zeitzonen in C++20: Kalendertag</a>" habe ich den Datentyp Kalendertag eingeführt. Heute möchte ich mit ihm interagieren.<br></div>
<div class="text"><img class="rteInlinetag" src="https://heise-cms.de/thumbs//2/9/9/8/3/9/4/TN_202100385_484087c4a2.png" title="<ir_inline itemname=bilder_mvp_bild_var2:3 type=2>" style="max-height: 25px; max-width: 25px;"><br></div>
<div class="text">Angenommen, ich habe ein Kalenderdatum wie <span class="tx_code">year(2100)/2/29</span>. Die erste Frage ist natürlich: Ist dieses Datum gültig?<br></div>
<div class="ztitel">Prüfen, ob ein Datum gültig ist<br></div>
<div class="text">Die vielen Datentypen rund um den Kalender besitzen eine Funktion <span class="tx_code">ok</span>. Sie gibt dann <span class="tx_code">true</span> zurück, wenn das Datum gültig ist:</div>
<div class="pre">//&nbsp; leapYear.cpp<br><br>#include &lt;iostream&gt;<br>#include "date.h"<br>&nbsp;<br>int main() {<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::boolalpha &lt;&lt; std::endl;<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; using namespace date; <br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Valid days" &lt;&lt; std::endl;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; day day31(31);<br>&nbsp;&nbsp;&nbsp; day day32 = day31 + days(1);<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; day31: " &lt;&lt; day31 &lt;&lt; "; ";<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; day31.ok(): " <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; day31.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; day32: " &lt;&lt; day32 &lt;&lt; "; ";<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "day32.ok(): " &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; day32.ok() &lt;&lt; std::endl;<br>&nbsp; &nbsp;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Valid months" &lt;&lt; std::endl;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (2) <br>&nbsp;&nbsp;&nbsp; month month1(1);<br>&nbsp;&nbsp;&nbsp; month month0(0);<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; month1: " &lt;&lt; month1 &lt;&lt; "; ";<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; month1.ok(): " &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; month1.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; month0: " &lt;&lt; month0 &lt;&lt; "; ";<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "month0.ok(): " &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; month0.ok() &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Valid years" &lt;&lt; std::endl;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (3) <br>&nbsp;&nbsp;&nbsp; year year2020(2020);<br>&nbsp;&nbsp;&nbsp; year year32768(-32768);<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; year2020: " &lt;&lt; year2020 &lt;&lt; "; ";<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; year2020.ok(): " &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; year2020.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; year32768: " &lt;&lt; year32768 &lt;&lt; "; ";<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "year32768.ok(): " &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; year32768.ok() &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Leap Years"&nbsp; &lt;&lt; std::endl;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (4) <br><br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2016{year(2016)/2/29};<br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2020{year(2020)/2/29};<br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2024{year(2024)/2/29};<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2016.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2016.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2020.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2020.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2024.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2024.ok() &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "No Leap Years"&nbsp; &lt;&lt; std::endl;&nbsp;&nbsp; // (5) <br><br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2100{year(2100)/2/29};<br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2200{year(2200)/2/29};<br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2300{year(2300)/2/29};<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2100.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2100.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2200.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2200.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2300.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2300.ok() &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Leap Years"&nbsp; &lt;&lt; std::endl;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (6) <br><br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2000{year(2000)/2/29};<br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2400{year(2400)/2/29};<br>&nbsp;&nbsp;&nbsp; constexpr auto leapYear2800{year(2800)/2/29};<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2000.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2000.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2400.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2400.ok() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; leapYear2800.ok(): " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; leapYear2800.ok() &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>}<br></div>
<div class="text">Ich habe in dem Programm geprüft, ob ein bestimmter Tag (Zeile 1), ein bestimmter Monat (Zeile 2) oder ein bestimmtes Jahr (Zeile 3) gültig ist. Der Gültigkeitsbereich eines Tags ist [1, 31], der eines Monats [1, 12] und der eines Jahres [-32767, 32767]. Entsprechend gibt der <span class="tx_code">ok</span>-Aufruf auf den Werten <span class="tx_code">false</span> zurück. Zwei Punkte sind interessant, wenn ich die Ergebnisse ausgeben. Zuerst: Wenn der Wert nicht gültig ist, erscheint in der Ausgabe: <span class="tx_code"> "is not a valid day"; "is not a valid month"; "is not a valid year</span>". Zweitens werden Monatswerte in einer String-Repräsentation ausgegeben.<br></div>
<div class="text"><img class="rteInlinetag" src="https://heise-cms.de/thumbs//2/9/9/8/3/9/4/TN_202100379_02ceba5785.png" title="<ir_inline itemname=bilder_mvp_bild_var2:1 type=2>" style="max-height: 25px; max-width: 25px;"><br></div>
<div class="text">Du kannst den <span class="tx_code">ok</span>-Aufruf auf einem Kalendertag anwenden. Damit ist es einfach zu prüfen, ob ein spezifischer Kalendertag ein Schalttag und damit das entsprechende Jahr ein Schaltjahr ist. In dem weltweit verwendeten<a class="" title="Link auf https://en.wikipedia.org/wiki/Gregorian_calendar" alt="%7B%22anchor%22%3A%22%22%2C%22alias%22%3A%22%22%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FGregorian_calendar%22%2C%22type%22%3A%22E%22%2C%22target%22%3A%22_blank%22%2C%22user_params%22%3A%22%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%2C%22version%22%3A1%2C%22custom%22%3A%7B%7D%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FGregorian_calendar%22%2C%22text%22%3A%22%20Gregorianischen%20Kalender%22%7D" href="https://en.wikipedia.org/wiki/Gregorian_calendar"> Gregorianischen Kalender</a> gelten die folgenden Regeln:<br></div>
<div class="text">Jedes Jahr, das exakt durch <b>4</b> teilbar ist, ist ein <b>Schaltjahr.</b></div>
<div class="text"><ul><li> Das gilt mit Ausnahme der Jahre, die exakt durch <b>100</b> teilbar sind. Diese Jahre sind <b>keine Schaltjahre</b>.</li><ul><li>Das gilt mit Ausnahme der Jahre, die exakt durch <b>400</b> teilbar sind. Diese Jahre sind <b>Schaltjahre</b>.</li></ul></ul></div>
<div class="text">Zu kompliziert? Das Programm <span class="tx_code">leapYears.cpp</span> bringt die Regeln auf den Punkt. </div>
<div class="text">Dank der erweiterten chrono-Bibliothek ist es sehr einfach, Zeitdauer zwischen Zeitpunkten abzufragen.</div>
<div class="ztitel">Kalendertage abfragen</div>
<div class="text">Das folgende Programm stellt ein paar Abfragen zu Kalendertagen vor: </div>
<div class="pre">// queryCalendarDates.cpp<br><br>#include "date.h"<br>#include &lt;iostream&gt;<br><br>int main() {<br><br>&nbsp;&nbsp;&nbsp; using namespace date;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; auto now = std::chrono::system_clock::now();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (1)<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "The current time is: " &lt;&lt; now &lt;&lt; " UTC\n";&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "The current date is: " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; floor&lt;days&gt;(now) &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "The current date is: " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; year_month_day{floor&lt;days&gt;(now)} &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "The current date is: " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; year_month_weekday{floor&lt;days&gt;(now)} &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; auto currentDate = year_month_day(floor&lt;days&gt;(now));&nbsp;&nbsp;&nbsp;&nbsp; // (2)<br>&nbsp;&nbsp;&nbsp; auto currentYear = currentDate.year();<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "The current year is " &lt;&lt; currentYear &lt;&lt; '\n';&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; auto currentMonth = currentDate.month();<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "The current month is " &lt;&lt; currentMonth &lt;&lt; '\n'; <br>&nbsp;&nbsp;&nbsp; auto currentDay = currentDate.day();<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "The current day is " &lt;&lt; currentDay &lt;&lt; '\n'; <br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (3)<br>&nbsp;&nbsp;&nbsp; auto hAfter = floor&lt;std::chrono::hours&gt;(now) - <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sys_days(January/1/currentYear); <br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "It has been " &lt;&lt; hAfter &lt;&lt; " since New Year!\n"; &nbsp;<br>&nbsp;&nbsp;&nbsp; auto nextYear = currentDate.year() + years(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (4)<br>&nbsp;&nbsp;&nbsp; auto nextNewYear = sys_days(January/1/nextYear);<br>&nbsp;&nbsp;&nbsp; auto hBefore =&nbsp; sys_days(January/1/nextYear) - <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; floor&lt;std::chrono::hours&gt;(now); <br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "It is " &lt;&lt; hBefore &lt;&lt; " before New Year!\n";<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (5)<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "It has been " &lt;&lt; floor&lt;days&gt;(hAfter) <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; " since New Year!\n";&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "It is " &lt;&lt; floor&lt;days&gt;(hBefore) <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; " before New Year!\n";<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br>&nbsp;&nbsp; &nbsp;<br>}</div>
<div class="text">Mit der C++20 Erweiterung lässt sich direkt ein Zeitpunkt wie <span class="tx_code">now</span> (Zeile 1) ausgeben. <span class="tx_code">std::chrono::floor</span> erlaubt es, diesen Zeitpunkt in einen Tag zu konvertieren: <span class="tx_code">std::chrono::sys_days</span>. Mit diesem Wert kannst du einen Kalender-Datentyp wie <span class="tx_code">std::chrono::year_month_day</span> initialisieren. Wenn ich den Wert in den Kalender-Datentyp <span class="tx_code">std::chrono::year_month_weekday</span> stecke, erhalte ich die Antwort, dass dieser spezifische Tag der dritte Dienstag im Oktober ist. </div>
<div class="text">Natürlich kann ich auch einen Kalendertag nach seinen Komponenten Jahr, Monat oder Tag (Zeile 2) abfragen.</div>
<div class="text">Zeile (3) finde ich am interessantesten. Wenn ich den gegenwärtigen Tag in der Stundenauflösung von dem ersten Januar des gegenwärtigen Jahres abziehen, erhalte ich die Anzahl der Stunden seit Neujahr. Es geht auch anders herum. Wenn ich vom ersten Januar des nächsten Jahres (Zeile 4) den gegenwärtigen Tag in Stundenauflösung abziehen, erhalte ich die Stunden bis zum Neujahr des nächsten Jahres. Eventuell bevorzugst du die Auflösung der Zeitdauer in Tagen. Zeile 5 setze diese Anforderung um. </div>
<div class="text"><img class="rteInlinetag" src="https://heise-cms.de/thumbs//2/9/9/8/3/9/4/TN_202100386_5f604c1fc9.png" title="<ir_inline itemname=bilder_mvp_bild_var2:4 type=2>" style="max-height: 25px; max-width: 25px;"></div>
<div class="text">Nun interessieren mich die Wochentage meiner Geburtstage.</div>
<div class="ztitel">Wochentage abfragen</div>
<div class="text">Die Wochentage eines vorgegebenen Kalendertags lassen sich einfach bestimmen:<br></div>
<div class="pre">// weekdaysOfBirthdays.cpp<br><br>#include &lt;cstdlib&gt;<br>#include &lt;iostream&gt;<br>#include "date.h"<br><br>int main() {<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; using namespace date;<br><br>&nbsp;&nbsp;&nbsp; int y;<br>&nbsp;&nbsp;&nbsp; int m;<br>&nbsp;&nbsp;&nbsp; int d;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Year: ";&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (1)<br>&nbsp;&nbsp;&nbsp; std::cin &gt;&gt; y;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Month: ";<br>&nbsp;&nbsp;&nbsp; std::cin &gt;&gt; m;<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Day: ";<br>&nbsp;&nbsp;&nbsp; std::cin &gt;&gt; d;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; auto birthday = year(y)/month(m)/day(d);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (2)<br><br>&nbsp;&nbsp;&nbsp; if (not birthday.ok()) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (3)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; birthday &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; std::exit(EXIT_FAILURE);<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Birthday: " &lt;&lt; birthday &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; auto birthdayWeekday = year_month_weekday(birthday);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (4)<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Weekday of birthday: " <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; birthdayWeekday.weekday() &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; auto currentDate = year_month_day(floor&lt;days&gt;(std::chrono::system_clock::now())); &nbsp;<br>&nbsp;&nbsp;&nbsp; auto currentYear = currentDate.year();<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; auto age = (int)currentDate.year() - (int)birthday.year();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // (5)<br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Your age: " &lt;&lt; age &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "Weekdays for your next 10 birthdays" &lt;&lt; std::endl; // (6)<br><br>&nbsp;&nbsp;&nbsp; for (int i = 1, newYear = (int)currentYear; i &lt;= 10;&nbsp; ++i ) { &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp; Age " &lt;&lt;&nbsp; ++age &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; auto newBirthday = year(++newYear)/month(m)/day(d);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp;&nbsp;&nbsp; Birthday: " &lt;&lt; newBirthday &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; "&nbsp;&nbsp;&nbsp; Weekday of birthday: " <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; year_month_weekday(newBirthday).weekday() &lt;&lt; std::endl;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; std::cout &lt;&lt; std::endl;<br><br>}<br></div>
<div class="text">Zuerst frägt das Programm das Jahr, den Monat und den Tag deines Geburtstags ab (Zeile 1). Auf der Grundlage der Eingabe erzeugt es anschließend einen Kalendertag (Zeile 2) und prüft, ob dieser gültig ist (Zeile 3). Nun kann der Wochentag deines Geburtstags dargestellt werden. Ich verwende dazu den Kalender-Datentyp <span class="tx_code">std::chrono::year_month_weekday</span> (Zeile 4). Um die <span class="tx_code">int</span>-Repräsentierung des Kalender-Datentyps zu erhalten, muss ich ihn nach <span class="tx_code">int</span> konvertieren (Zeile 5). Damit ist es möglich, dein Alter darzustellen. Zum Abschluss präsentiert das Programm noch die Wochentage der nächsten zehn Geburtstage (Zeile 6) in dem folgenden Format: Alter, Kalenderdatum und Wochentag. Dazu muss ich lediglich die Variable <span class="tx_code">age</span> und <span class="tx_code">newYear</span> inkrementieren.&nbsp; </div>
<div class="text">Hier ist die Ausgabe des Programms mit meinem Geburtstag:</div>
<div class="text"><img class="rteInlinetag" src="https://heise-cms.de/thumbs//2/9/9/8/3/9/4/TN_202100397_8cd96d5eb4.png" title="<ir_inline itemname=bilder_mvp_bild_var2:5 type=2>" style="max-height: 25px; max-width: 25px;"></div>
<div class="ztitel">Wie geht's weiter?</div>
<div class="text">Eine wichtige Komponente fehlte bisher in meiner Vorstellung der erweiterten chrono Bibliothek: Zeitzonen.<br></div>