<div class="vorspann">Die Zukunft von C++ spricht Templates und so auch mein Blog Modernes C++. Basierend auf der Umfrage meines letzten Beitrags "<a title="Link auf https://heise.de/-6018689" alt="%7B%22custom%22%3A%7B%7D%2C%22text%22%3A%22Quo%20Vadis%20-%20Modernes%20C%2B%2B%22%2C%22anchor%22%3A%22%22%2C%22type%22%3A%22E%22%2C%22version%22%3A1%2C%22destination%22%3A%22https%3A%2F%2Fheise.de%2F-6018689%22%2C%22href%22%3A%22https%3A%2F%2Fheise.de%2F-6018689%22%2C%22alias%22%3A%22%22%2C%22target%22%3A%22_blank%22%2C%22user_params%22%3A%22%22%2C%22mediasync_id%22%3A%22%22%2C%22ir_link%22%3A1%2C%22subject%22%3A%22%22%7D" href="https://heise.de/-6018689" class="">Quo Vadis - Modernes C++</a>", erklären meine nächsten wohl 50 - 100 Artikel die Details zu Templates. In diesem Artikel möchte ich einen Ausblick geben.<br></div>
<div class="text"><img class="rteInlinetag" src="https://heise-cms.de/thumbs//3/0/9/5/2/0/8/TN_210027281_4aa6032197.png" title="<ir_inline itemname=bilder_mvp_bild_var2:1 type=2>" style="max-height: 25px; max-width: 25px;"><br></div>
<div class="text">Lasst mich zunächst ein paar Worte zu der Umfrage schreiben, denn ihr Ergebnis hat mich in zweierlei Hinsicht überrascht.</div>
<div class="ztitel">Die Umfrage</div>
<div class="text">Erstens nahmen mehr als 400 Personen an der Umfrage teil. Das ist eine Zahl, die ich so nicht erwartet hätte. Vielen Dank für die vielen Stimmen.</div>
<div class="text">Zweitens bin ich davon ausgegangen, dass "C++23" die Umfrage gewinnen wird, gefolgt von "Templates" oder "Erweitern und Einbetten von Python mit C/C++". Meine Annahme war so falsch. Ich bin froh, dass ich die Umfrage gemacht habe.</div>
<div class="text">Wenn ich mit dem Themenkomplex "Templates" fertig bin, führe ich die nächste Umfrage durch. Jetzt möchte ich mich aber den Templates widmen. <br></div>
<div class="ztitel">Templates<br></div>
<div class="text">Zuallererst: Was sind Templates? Templates (Klassen-Templates oder Funktions-Templates) sind Familien von Klassen oder Funktionen.</div>
<div class="text">Bevor ich meinen Plan vorstelle, möchte ich ein paar Worte loswerden. Falls ich ein Template-bezogenes Feature vergessen habe, an dem ihr interesssiert seid, schreibt mir bitte eine E-Mail an folgende Adresse: <a title="Link auf Rainer.Grimm@modernescpp.de" alt="%7B%22user_params%22%3A%22%22%2C%22target%22%3A%22%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%2C%22mediasync_id%22%3A%22%22%2C%22custom%22%3A%7B%7D%2C%22anchor%22%3A%22%22%2C%22text%22%3A%22Rainer.Grimm%40modernescpp.de%22%2C%22version%22%3A1%2C%22href%22%3A%22mailto%3ARainer.Grimm%40modernescpp.de%22%2C%22alias%22%3A%22%22%2C%22destination%22%3A%22Rainer.Grimm%40modernescpp.de%22%2C%22type%22%3A%22E_Mail%22%7D" href="mailto:Rainer.Grimm@modernescpp.de" class="">Rainer.Grimm@modernescpp.de</a>.</div>
<div class="text">Das sind die zukünftigen Themen mit ein paar erläuternden Worten.</div>
<div class="ztitel_kleiner">Grundlagen</div>
<div class="text">Natürlich beginnt meine Tour mit den Grundlagen.</div>
<div class="text"><ul><li>Die Vorstellung der Instanziierung von <b>Funktions-Templates</b> vermittelt die erste Intuition zu Templates. Dies gilt insbesondere, wenn Funktionsüberladungen oder explizite Template-Argumente angegeben werden.</li><li>Im Gegensatz zu Funktions-Template kann nur der C++17-Compiler die Template-Argumente für <b>Klassen-Templates</b> bestimmen. Das heißt, vor C++17 mussten Entwickler Template-Argumente wie <span class="tx_code">int </span>in <span class="tx_code">std::vector&lt;int&gt;</span> angeben.</li><li><b>Template-Parameter</b> können Typen, Nicht-Typen und Templates selbst sein. Insbesondere können in C++20 Fließkommazahlen als Nicht-Typ Template-Parameter verwendet werden.</li><li>Der Compiler kann die <b>Template-Argumente</b> automatisch bestimmen. Es macht dabei einen großen Unterschied, ob der Template-Parameter eine Referenz/Zeiger, eine universelle Referenz (<span class="tx_code">&amp;&amp;</span>) oder ein Wert ist. Templates können auch Default-Template-Argumente besitzen.</li><li>Klassen-Templates erlauben teilweise und vollständige <b>Template-Spezialisierung</b>, Funktions-Templates dagegen nur eine teilweise Template-Spezialisierung.<br></li></ul></div>
<div class="ztitel_kleiner">Details</div>
<div class="text">Nach den Grundlagen folgen die Details.</div>
<div class="text"><ul><li>Im Allgemeinen geschieht die<b> Instanziierung von Templates</b> implizit, sie kann aber auch explizit erfolgen. <br></li><li>Ein <b>Variadic-Template</b> ist ein Template, das eine beliebige Anzahl von Parametern haben kann. Damit können Templates eine beliebige Anzahl von Argumenten einer beliebigen Wertkategorie annehmen.</li><li>Basierend auf Variadic-Templates in C++11 kennt C++17 <b>Fold-Ausdrücke</b>. Sie reduzieren Parameterpakete auf binäre Operatoren.</li><li>Eine Besonderheit ist die <b>Freundschaft von Templates</b>. Eine Klasse oder Klassen-Template kann jeder Instanz eines Klassen-Templates oder Funktions-Templates allgemeine Freundschaft aussprechen. Die Freundschaft kann auch nur bestimmten Instanzen eine Klassen-Templates oder Funktions-Templates gewährt werden, und auch einem bestimmten Datentyp.</li><li><b>Namen</b> <b>können von Template-Parametern abhängig</b> sein. Bei abhängigen Namen benötigt der&nbsp; Compiler Hilfe, um zu entscheiden, ob der Name ein Typ, ein Nichttyp oder ein Template ist. Bei Mehrdeutigkeit geht der Compiler davon aus, dass ein Name ein Nichttyp ist.</li></ul></div>
<div class="ztitel_kleiner">Techniken</div>
<div class="text">Es gibt viele interessante Techniken und Feature im Zusammenhang mit Template und der Template Instanziierung.</div>
<div class="text"><ul><li>Wenn ein Funktions-Template mit mindestens zwei Template-Parametern zum Einsatz kommt, lässt es sich im Allgemeinen nicht entscheiden, welchen Rückgabetyp das Funktions-Template besitzen soll. Hier leistet der <b>automatische Rückgabetyp</b> wertvolle Hilfe.</li><li><b>Template-Metaprogrammierung</b> ist <a title="Link auf https://de.wikipedia.org/wiki/Turing-Vollst%C3%A4ndigkeit" alt="%7B%22ir_link%22%3A1%2C%22subject%22%3A%22%22%2C%22mediasync_id%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22target%22%3A%22_blank%22%2C%22alias%22%3A%22%22%2C%22href%22%3A%22https%3A%2F%2Fde.wikipedia.org%2Fwiki%2FTuring-Vollst%25C3%25A4ndigkeit%22%2C%22destination%22%3A%22https%3A%2F%2Fde.wikipedia.org%2Fwiki%2FTuring-Vollst%25C3%25A4ndigkeit%22%2C%22version%22%3A1%2C%22type%22%3A%22E%22%2C%22text%22%3A%22Turing-vollst%C3%A4ndig%22%2C%22anchor%22%3A%22%22%2C%22custom%22%3A%7B%7D%7D" href="https://de.wikipedia.org/wiki/Turing-Vollst%C3%A4ndigkeit" class="">Turing-vollständig</a>. Das bedeutet, dass alles, was berechenbar ist, sich zur Compilezeit berechnen lässt. Template-Metaprogrammierung ist eine rein funktionale Sprache, eingebettet in die imperative Sprache C++. Libraries wie viele der <a title="Link auf https://www.boost.org/" alt="%7B%22user_params%22%3A%22%22%2C%22target%22%3A%22_blank%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%2C%22mediasync_id%22%3A%22%22%2C%22custom%22%3A%7B%7D%2C%22anchor%22%3A%22%22%2C%22text%22%3A%22Boost-Bibliotheken%20%22%2C%22version%22%3A1%2C%22destination%22%3A%22https%3A%2F%2Fwww.boost.org%2F%22%2C%22alias%22%3A%22%22%2C%22href%22%3A%22https%3A%2F%2Fwww.boost.org%2F%22%2C%22type%22%3A%22E%22%7D" href="https://www.boost.org/" class="">Boost-Bibliotheken </a>setzen intensiv Template-Metaprogrammierung ein.<br></li><li>Die <b>Type-Traits Bibliothek</b> stellt angewandte Template-Metaprogrammierung dar. Dank der Type-Traits&nbsp; Bibiliothek sind Typprüfungen, Typvergleiche und Typänderungen zur Compilezeit möglich.</li><li><b><span class="tx_code">constexpr </span></b>ist die angenehmste Art, zur Compilezeit zu programmieren. Im Gegensatz zum Programmieren im funktionalen Stil mit Template-Metaprogrammierung, erlaubt <span class="tx_code">constexpr </span>das Programmieren im imperativen Stil.</li><li><b><span class="tx_code">constexpr if</span></b> ermöglicht es, Quellcode bedingt zu kompilieren.<br></li></ul></div>
<div class="ztitel_kleiner">Design </div>
<div class="text">Templates eröffnet C++ neue Möglichkeiten, Software zu entwerfen.</div>
<div class="text"><ul><li>Neben dem <b>dynamischen Polymorphismus</b> (Objektorientierung) können wir den <b>statischen Polymorphismus</b> (Templates) einsetzen.</li><li><b>CRTP</b> (curiously recurring template pattern) ist eine verblüffende, aber sehr mächtige Technik. Dank ihr können wir die Virtualität von der Runtime auf die Compilezeit verlagern.</li><li><b>Expression-Templates</b> erzeugen Strukturen, die für Berechnungen stehen. Sie werden nur bei Bedarf ausgewertet und sparen somit Zeit und Speicher.</li><li>Es gibt viele<b> Idiome und Pattern</b> im Zusammenhang mit Templates. Zum Beispiel kennen wir Policies und Traits, Tag-Dispatching und Type Erasure.<br></li></ul></div>
<div class="ztitel_kleiner">C++20<br></div>
<div class="text"><ul><li>Der englische <a title="Link auf https://en.wikipedia.org/wiki/Concepts_(C%2B%2B)" alt="%7B%22type%22%3A%22E%22%2C%22version%22%3A1%2C%22alias%22%3A%22%22%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FConcepts_%28C%252B%252B%29%22%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FConcepts_%28C%252B%252B%29%22%2C%22custom%22%3A%7B%7D%2C%22text%22%3A%22Wikipedia-Eintrag%20beschreibt%20Concepts%22%2C%22anchor%22%3A%22%22%2C%22mediasync_id%22%3A%22%22%2C%22ir_link%22%3A1%2C%22subject%22%3A%22%22%2C%22target%22%3A%22_blank%22%2C%22user_params%22%3A%22%22%7D" href="https://en.wikipedia.org/wiki/Concepts_(C%2B%2B)" class="">Wikipedia-Eintrag beschreibt Concepts</a> folgendermaßen<b>: Concepts</b> are an extension to the <a title="Link auf https://en.wikipedia.org/wiki/Template_(C%2B%2B)" alt="%7B%22mediasync_id%22%3A%22%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%2C%22target%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22type%22%3A%22E%22%2C%22version%22%3A1%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FTemplate_%28C%252B%252B%29%22%2C%22alias%22%3A%22%22%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FTemplate_%28C%252B%252B%29%22%2C%22custom%22%3A%7B%7D%2C%22anchor%22%3A%22%22%2C%22text%22%3A%22templates%22%7D" href="https://en.wikipedia.org/wiki/Template_(C%2B%2B)" class="">templates</a> feature provided by the <a title="Link auf https://en.wikipedia.org/wiki/C%2B%2B" alt="%7B%22user_params%22%3A%22%22%2C%22target%22%3A%22%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%2C%22mediasync_id%22%3A%22%22%2C%22custom%22%3A%7B%7D%2C%22text%22%3A%22C%2B%2B%22%2C%22anchor%22%3A%22%22%2C%22version%22%3A1%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FC%252B%252B%22%2C%22alias%22%3A%22%22%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FC%252B%252B%22%2C%22type%22%3A%22E%22%7D" href="https://en.wikipedia.org/wiki/C%2B%2B" class="">C++</a> programming language. Concepts are named <a title="Link auf https://en.wikipedia.org/wiki/Boolean_value" alt="%7B%22custom%22%3A%7B%7D%2C%22anchor%22%3A%22%22%2C%22text%22%3A%22Boolean%22%2C%22type%22%3A%22E%22%2C%22version%22%3A1%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FBoolean_value%22%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FBoolean_value%22%2C%22alias%22%3A%22%22%2C%22target%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22mediasync_id%22%3A%22%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%7D" href="https://en.wikipedia.org/wiki/Boolean_value" class="">Boolean</a> predicates on template parameters, evaluated at <a title="Link auf https://en.wikipedia.org/wiki/Compile_time" alt="%7B%22type%22%3A%22E%22%2C%22version%22%3A1%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCompile_time%22%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCompile_time%22%2C%22alias%22%3A%22%22%2C%22custom%22%3A%7B%7D%2C%22anchor%22%3A%22%22%2C%22text%22%3A%22compile%20time%22%2C%22mediasync_id%22%3A%22%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%2C%22target%22%3A%22%22%2C%22user_params%22%3A%22%22%7D" href="https://en.wikipedia.org/wiki/Compile_time" class="">compile time</a>. A concept may be associated with a template (<a title="Link auf https://en.wikipedia.org/wiki/Class_(C%2B%2B)" alt="%7B%22target%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22mediasync_id%22%3A%22%22%2C%22ir_link%22%3A1%2C%22subject%22%3A%22%22%2C%22text%22%3A%22class%22%2C%22anchor%22%3A%22%22%2C%22custom%22%3A%7B%7D%2C%22type%22%3A%22E%22%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FClass_%28C%252B%252B%29%22%2C%22alias%22%3A%22%22%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FClass_%28C%252B%252B%29%22%2C%22version%22%3A1%7D" href="https://en.wikipedia.org/wiki/Class_(C%2B%2B)" class="">class</a> template, <a title="Link auf https://en.wikipedia.org/wiki/Function_(computer_programming)" alt="%7B%22target%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22mediasync_id%22%3A%22%22%2C%22ir_link%22%3A1%2C%22subject%22%3A%22%22%2C%22anchor%22%3A%22%22%2C%22text%22%3A%22function%22%2C%22custom%22%3A%7B%7D%2C%22type%22%3A%22E%22%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFunction_%28computer_programming%29%22%2C%22alias%22%3A%22%22%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFunction_%28computer_programming%29%22%2C%22version%22%3A1%7D" href="https://en.wikipedia.org/wiki/Function_(computer_programming)" class="">function</a> template, or <a title="Link auf https://en.wikipedia.org/wiki/Member_function" alt="%7B%22anchor%22%3A%22%22%2C%22text%22%3A%22member%20function%22%2C%22custom%22%3A%7B%7D%2C%22type%22%3A%22E%22%2C%22destination%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FMember_function%22%2C%22alias%22%3A%22%22%2C%22href%22%3A%22https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FMember_function%22%2C%22version%22%3A1%2C%22target%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22mediasync_id%22%3A%22%22%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%7D" href="https://en.wikipedia.org/wiki/Member_function" class="">member function</a> of a class template), in which case it serves as a <i>constraint</i>: it limits the set of arguments that are accepted as template parameters</li></ul></div>
<div class="ztitel">Wie geht's weiter? <br></div>
<div class="text">In meinem nächsten Artikel werde ich Templates einführen und dabei <a title="Link auf https://cppinsights.io/" alt="%7B%22href%22%3A%22https%3A%2F%2Fcppinsights.io%2F%22%2C%22destination%22%3A%22https%3A%2F%2Fcppinsights.io%2F%22%2C%22alias%22%3A%22%22%2C%22version%22%3A1%2C%22type%22%3A%22E%22%2C%22anchor%22%3A%22%22%2C%22text%22%3A%22C%2B%2B%20Insights%22%2C%22custom%22%3A%7B%7D%2C%22subject%22%3A%22%22%2C%22ir_link%22%3A1%2C%22mediasync_id%22%3A%22%22%2C%22user_params%22%3A%22%22%2C%22target%22%3A%22_blank%22%7D" href="https://cppinsights.io/" class="">C++ Insights</a> verwenden.<br></div>